{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block head_extra %} 
{{ form.media }}

{% endblock head_extra %}

{% block body_block %} 
<div class="col-md-12">dokumentasi markdown <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">disini</a></div> 
<div class="col-md-6">          
	<h1>Add Post</h1>
	<hr>
	<form method='POST' action="">
	{% csrf_token %}
	{{ form|crispy }}
	<input type="submit" class='btn btn-primary' value="Save">
	</form>
</div>
<div class='col-sm-6'>
<h1>Preview</h1>
<hr/>
<div class='content-preview'>
    <h3 id='preview-title'></h3>
    <p id='preview-content'></p>
</div>
</div>
{% endblock body_block %}

{% block script_extra %} 
<script type="text/javascript">
$(document).ready(function(){
    $(".content-markdown").each(function(){
            var content = $(this).text()
            var markedContent = marked(content)
            $(this).html(markedContent)
    })
    $(".post-detail-item img").each(function(){
            $(this).addClass("img-responsive");
    })

    

    var contentInput = $("#id_content");

    function setContent(value){
        var markedContent = marked(value)
        $("#preview-content").html(markedContent)
        $("#preview-content img").each(function(){
            $(this).addClass("img-responsive")
        })
    }
    setContent(contentInput.val())

    contentInput.keyup(function(){
        var newContent = $(this).val()
        setContent(newContent)
    })

    var titleInput = $("#id_title");
    


    function setTitle(value) {
        $("#preview-title").text(value)
    }
    setTitle(titleInput.val())

    titleInput.keyup(function(){
        var newContent = $(this).val()
        setTitle(newContent)
    })



    // preview-title
    // preview-content

})

</script>
{% endblock script_extra %}